# Домашнее задание к занятию "10.06. Инцидент-менеджмент"

## Задание 1

Составьте постмотрем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).
 
```html
* Краткое описание: 

21 октября в 22:52 UTC в результате плановых работ по замене вышедшего из строя оптического оборудования 
была потеряна связь между сетевым концентратором на восточном побережье США и основным центром обработки данных 
на восточном побережье США. Связь была восстановлена в течение 43 секунд, но последствиями стало отображение устаревшей 
информации на сайте Github и невозможности ее обновления. Работоспособность была восстановлена через 24 часа 11 минут, 
данные пользователей были сохранены.

* Предшествующие события: 

Плановые работы по замене вышедшего из строя оптического оборудования 100G

* Причина инцидента:

Потеря связи между сетевым концентратором и основным центром обработки данных на восточном побережье США, вызванная 
плановыми работами.  

* Воздействие:

Сбой базы данных, в следствие которого на сайте появилась непоследовательная информация

* Обнаружение:

21 октября в 22:54 UTC внутренние системы мониторинга начали генерировать предупреждения, указывающие на многочисленные
сбои в системах Github. 
К 23:02 UTC инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных 
находятся в непредвиденном состоянии.

* Реакция:

Над устранением инцидента работали инженеры группы быстрого реагирования, координатор инцидента и группа реагирования 
на инциденты. Были вызваны дополнительные инженеры из группы разработки баз данных GitHub. Пользователи были оповещены
через твиттер и блог GitHub.

* Восстановление:

Базы данных были восстановлены из резервных копий, реплики на обоих сайтах были синхронизированы, возвращена исходная
топология, а затем возобновлена обработка заданий в очереди.

* Таймлайн:
21 октября в 22:52 UTC Регламентные работы по замене вышедшего из строя оптического оборудования 100G
21 октября 22:52 UTC Согласно консенсусу Raft сети Orchestrator начато аварийное переключение кластеров для направления 
операций записи в центр обработки данных на западном побережье США.
21 октября 22:54 UTC Внутренние системы мониторинга начали генерировать предупреждения, указывающие на многочисленные 
сбои в  системах.
21 октября 23:02 UTC Инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных
находятся в непредвиденном состоянии.
21 октября 23:07 UTC Отвечающая команда вручную заблокировала внутренний инструмент развертывания
21 октября 23:09 UTC Команда респондентов поместила сайт в желтый статус
21 октября 23:11 Присоединился координатор инцидента и через две минуты изменил статус на красный.
21 октября 23:13 UTC Стало понятно, что проблема затронула несколько кластеров баз данных. Были вызваны дополнительные
инженеры из группы разработки баз данных GitHub.
21 октября 23:19 UTC Остановлено выполнение заданий, записывающих метаданные о таких вещах, как push-уведомления, 
приостановлено выполнение веб-перехватчика и сборка GitHub Pages.
22 октября 00:05 UTC Инженеры, начали разработку плана по устранению несоответствий данных и внедрению процедур аварийного
переключения для MySQL, обновилен статус, чтобы проинформировать пользователей о контролируемом переходе на другой узел 
кластера
22 октября 00:41 UTC Инициирован процесс резервного копирования для всех затронутых кластеров MySQL.
22 октября 06:51 UTC Несколько кластеров завершили восстановление из резервных копий в ЦОД на востоке США и начали
репликацию новых данных с запада.
22 октября 07:46 UTC GitHub опубликовал сообщение в блоге , чтобы предоставить больше информации.
22 октября 11:12 UTC Все первичные базы данных снова установлены на восточном побережье США.
22 октября 13:15 UTC Cтали доступны, дополнительные реплики чтения MySQL в общедоступном облаке восточного побережья США.
22 октября 16:24 UTC Реплики синхронизированы, выполнено аварийное переключение на исходную топологию.
22 октября 16:45 UTC Повторно включена обработка очереди из более пяти миллионов событий ловушек и 80 тысяч сборок страниц.
22 октября 23:03 UTC Все ожидающие сборки вебхуков и страниц обработаны, и подтверждена целостность и правильная работа
всех систем. Статус сайта обновлен до зеленого.

Последующие действия:

Изменение конфигурации Оркестратора.

Ускорение перехода на новый механизм сообщения о статусе обслуживания, т.к. статусы «зеленый», «желтый», «красный» не 
дают пользователям полного представления о доступности той или иной службы.

Ускорение перехода на схему обработки трафика GitHub "active/active/active". Цель этой работы — допустить полный отказ 
одного центра обработки данных без воздействия на пользователя
```
---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
